<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>แบบประเมินความพึงพอใจ</title>

    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> <!-- SweetAlert2 -->
</head>
<body>
<header>
    <div class="logo">
        <img src="detective.png" alt="Logo">
        <span>Luksood GU.</span>
    </div>
    <span style="font-size: 30px;">แบบประเมินความพึงพอใจ</span>
    <div class="right-text">
        <span>แนะนำคณะที่ใช่</span>
    </div>
</header>

<div class="body1">
    <div class="boxbodywhite">
        <form id="quizForm" action="Assessment.php" method="POST">
        <div class="whitebox">
            <div style="padding: 15px;">
                <h4>ความตรงกับความต้องการ?</h4><br>
                <input type="radio" id="q1_1" name="assessment1" value="ไม่เห็นด้วยเลย">
                <label for="q1_1">ไม่เห็นด้วยเลย</label>
    
                <input type="radio" id="q1_2" name="assessment1" value="ไม่ค่อยเห็นด้วย">
                <label for="q1_2">ไม่ค่อยเห็นด้วย</label>
    
                <input type="radio" id="q1_3" name="assessment1" value="เห็นด้วย">
                <label for="q1_3">เห็นด้วย</label>
    
                <input type="radio" id="q1_4" name="assessment1" value="เห็นด้วยที่สุด">
                <label for="q1_4">เห็นด้วยที่สุด</label>
            </div>
        </div>
        <div class="whitebox">
            <div style="padding: 15px;">
                <h4>ใช้คำถามที่เข้าใจง่าย?</h4><br>
                <input type="radio" id="q2_1" name="assessment2" value="ไม่เห็นด้วยเลย">
                <label for="q2_1">ไม่เห็นด้วยเลย</label>
    
                <input type="radio" id="q2_2" name="assessment2" value="ไม่ค่อยเห็นด้วย">
                <label for="q2_2">ไม่ค่อยเห็นด้วย</label>
    
                <input type="radio" id="q2_3" name="assessment2" value="เห็นด้วย">
                <label for="q2_3">เห็นด้วย</label>
    
                <input type="radio" id="q2_4" name="assessment2" value="เห็นด้วยที่สุด">
                <label for="q2_4">เห็นด้วยที่สุด</label>
            </div>
        </div>
        <div class="whitebox">
            <div style="padding: 15px;">
                <h4>ความพึงพอใจโดยรวม?</h4><br>
                <input type="radio" id="q3_1" name="assessment3" value="ไม่ชอบเลย">
                <label for="q3_1">ไม่ชอบเลย</label>
    
                <input type="radio" id="q3_2" name="assessment3" value="ไม่ค่อยชอบ">
                <label for="q3_2">ไม่ค่อยชอบ</label>
    
                <input type="radio" id="q3_3" name="assessment3" value="ชอบ">
                <label for="q3_3">ชอบ</label>
    
                <input type="radio" id="q3_4" name="assessment3" value="ชอบมาก">
                <label for="q3_4">ชอบมาก</label>
            </div>
        </div>
    </div>   
    <div class="botton">
        <div class="input-group">
            <p1>บันทึกคำตอบ</p1>
            <button type="submit" class="btn">Save</button>
        </div>
    </div>
    </form>
</div>
<script>
    document.getElementById("quizForm").addEventListener("submit", function(event) {
    event.preventDefault();  // ป้องกันการส่งฟอร์ม

    let assessment1 = document.querySelector('input[name="assessment1"]:checked');
    let assessment2 = document.querySelector('input[name="assessment2"]:checked');
    let assessment3 = document.querySelector('input[name="assessment3"]:checked');

    // แจ้งเตือนเมื่อกรุณาตอบคำถามให้ครบทุกข้อ
if (!assessment1 || !assessment2 || !assessment3) {
    Swal.fire({
        title: "กรุณาตอบคำถามให้ครบทุกข้อ",
        icon: "warning",
        showConfirmButton: true, // เพิ่มปุ่มตกลง
        confirmButtonText: "ตกลง" // เปลี่ยนข้อความในปุ่ม
    });
    return;  // หยุดการทำงานของฟังก์ชันถ้าผู้ใช้ไม่ตอบครบ
}

    // ถ้าตอบครบแล้ว, ส่งข้อมูลไปยัง server
    let formData = new FormData(document.getElementById("quizForm"));
    
    fetch("Assessment.php", {
        method: "POST",
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === "success") {
            Swal.fire({
                title: "บันทึกคำตอบสำเร็จ",
                icon: "success",
                timer: 2000,
                showConfirmButton: false
            }).then(function() {
                window.location.href = "dashboard.html"; // ไปยังหน้าหลัก
            });
        } else {
            Swal.fire({
                title: "เกิดข้อผิดพลาด",
                text: data.message,
                icon: "error"
            });
        }
    })
    .catch(error => {
        Swal.fire({
            title: "เกิดข้อผิดพลาด",
            text: error,
            icon: "error"
        });
    });
});

</script>

</body>
</html>
