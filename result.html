<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luksood GU</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- เชื่อมต่อ Chart.js -->
</head>

<header>
    <div class="logo">
        <img src="detective.png" alt="Logo">
        <span>Luksood GU.</span>
    </div>
    <span style="font-size: 30px;">คณะที่แนะนำ</span>
    <div class="right-text">
        <span>แนะนำคณะที่ใช่</span>
    </div>
</header>

<body>
    <div class="body">
        <div class="body1">
            <div class="imegebox3">
                <div class="whitebox3">
                    <h1 style="text-align: center;">ผลลัพธ์</h1>
                    <!-- แสดงกราฟ Pie Chart -->
                    <div class="charts-container" style="display: flex; justify-content: space-around; margin-top: 20px;">
                        <div style="width: 50%;">
                            <canvas id="chart1"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="botton">
            <form action="Assessment.html">
                <p>ทำแบบประเมิน</p>
                <div class="input-group">
                    <button type="submit" class="btn2">NEXT</button>
                </div>
            </form>
        </div>
    </div>

    <!-- สคริปต์สำหรับสร้างกราฟ -->
    <script>
        // กำหนดข้อความ labels แยกเป็นตัวแปร
        const chartLabels = ['คณะวิทยาศาสตร์และเทคโนโลยี', 'คณะวิศวกรรมศาสตร์', 'คณะเทคโนโลยีการเกษตร']; // ชื่อในกราฟ
        const chartData = [40, 35, 25]; // ข้อมูลเปอร์เซ็นต์
        const chartColors = ['#FF6384', '#36A2EB', '#FFCE56']; // สีของแต่ละส่วน
    
        // เพิ่ม Plugin สำหรับแสดงข้อความใน Pie Chart บนพื้นที่สี
        Chart.register({
            id: 'textPlugin',
            afterDatasetDraw: function(chart) {
                const ctx = chart.ctx;
                const datasets = chart.data.datasets[0];
                const meta = chart.getDatasetMeta(0);
                
                // วนลูปผ่านแต่ละส่วนของ Pie Chart
                meta.data.forEach((arc, index) => {
                    const { x, y } = arc.tooltipPosition(); // ตำแหน่งตรงกลางของแต่ละส่วน
                    const value = datasets.data[index];
                    const label = chartLabels[index]; // ใช้ตัวแปร chartLabels
                    
                    // ตั้งค่าฟอนต์และข้อความ
                    ctx.save();
                    ctx.font = '14px Arial';
                    ctx.fillStyle = '#000000'; // สีข้อความ
                    ctx.textAlign = 'center';
                    ctx.fillText(`${label}: ${value}%`, x, y); // แสดงข้อความในแต่ละส่วน
                    ctx.restore();
                });
            }
        });
    
        // สร้าง Pie Chart
        const ctx1 = document.getElementById('chart1').getContext('2d');
        new Chart(ctx1, {
            type: 'pie',
            data: {
                labels: chartLabels, // เรียกใช้ตัวแปร labels
                datasets: [{
                    data: chartData, // เรียกใช้ตัวแปร data
                    backgroundColor: chartColors, // เรียกใช้ตัวแปร colors
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top', // ตำแหน่งตำนาน
                    },
                }
            },
            plugins: ['textPlugin'] // เพิ่ม Plugin ข้อความ
        });
    </script>
    
</body>
</html>
